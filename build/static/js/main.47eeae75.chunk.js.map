{"version":3,"sources":["components/Header.jsx","utils/api.js","components/Loader.jsx","components/UpdatedOn.jsx","components/Table.jsx","components/LineDetails.jsx","App.js","index.js"],"names":["Header","src","alt","style","maxWidth","objectFit","className","fetchLines","axios","get","fetchLine","lineId","Loader","UpdatedOn","lastUpdated","id","moment","format","Table","state","rawLines","lines","Date","getData","dataSub","unsubscribe","timer","pipe","switchMap","subscribe","data","setState","filter","item","props","filterId","this","prevProps","loaded","map","i","key","name","lineStatuses","s","index","isLast","length","includes","statusSeverityDescription","width","height","viewBox","fill","xmlns","fillRule","d","clipRule","to","Component","LineDetails","loading","line","error","from","finalize","reason","objectPosition","top","bottom","right","left","background","setTimeout","window","scrollTo","behavior","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yRAEe,SAASA,IACvB,OACC,gCACC,yBACCC,IAAI,uGACJC,IAAI,OACJC,MAAO,CAAEC,SAAU,QAASC,UAAW,aAExC,wBAAIC,UAAU,OAAd,iB,qECRUC,EAAa,kBACzBC,IAAMC,IACL,0GAGWC,EAAY,SAAAC,GAAM,OAC9BH,IAAMC,IAAN,sCACgCE,EADhC,sECNYC,EAAS,WACrB,OACC,yBAAKN,UAAU,yDACd,yBAAKA,UAAU,+BACd,0BAAMA,UAAU,WAAhB,iB,iBCHSO,EAAY,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YAC3B,OACC,wBAAIC,GAAG,WAAP,cACaC,IAAOF,GAAaG,OAAO,iCCGrBC,E,4MAGpBC,MAAQ,CACPC,SAAU,GACVC,MAAO,KACPP,YAAa,IAAIQ,M,EAyBlBC,QAAU,WACL,EAAKC,SAAS,EAAKA,QAAQC,cAE/B,EAAKD,QAAUE,YAAM,EAAG,KACtBC,KAAKC,aAAU,kBAAMrB,QACrBsB,WAAU,gBAAGC,EAAH,EAAGA,KAAH,OACV,EAAKC,SAAS,CACbX,SAAUU,EACVT,MAAOS,EAAKE,QAAO,SAACC,GACnB,OAAK,EAAKC,MAAMC,UAETF,EAAKlB,KAAO,EAAKmB,MAAMC,YAE/BrB,YAAa,IAAIQ,W,kEAlCpBc,KAAKb,Y,yCAGac,GAAY,IAAD,OACzBD,KAAKF,MAAMC,WAAaE,EAAUF,WACrCC,KAAKL,SAAS,CACbV,MAAOe,KAAKjB,MAAMC,SAASY,QAAO,SAACC,GAClC,OAAK,EAAKC,MAAMC,UAETF,EAAKlB,KAAO,EAAKmB,MAAMC,cAI5BC,KAAKF,MAAMI,QAAQF,KAAKF,MAAMI,Y,6CAK/BF,KAAKZ,SAASY,KAAKZ,QAAQC,gB,+BAsB/B,OAAKW,KAAKjB,MAAME,MAGf,6BACC,kBAAC,EAAD,CAAWP,YAAasB,KAAKjB,MAAML,cACnC,2BACCR,UAAU,+CACVS,GAAG,SAEH,+BACEqB,KAAKjB,MAAME,MAAMkB,KAAI,SAACC,GACtB,OACC,wBAAIC,IAAKD,EAAEzB,IACV,4BACC,uBACCT,UAAU,kCACVS,GAAE,UAAKyB,EAAEzB,KAERyB,EAAEE,OAGL,4BACEF,EAAEG,aAAaJ,KAAI,SAACK,EAAGC,GACvB,IAAMC,EAASD,IAAUL,EAAEG,aAAaI,OAAS,EACjD,MAAQ,CAAC,YAAa,gBAAgBC,SACrCJ,EAAEK,2BAoBF,uBAAG3C,UAAYwC,EAAkB,OAAT,OAAiBL,IAAKI,GAC5CD,EAAEK,2BAnBJ,uBAAG3C,UAAYwC,EAAkB,OAAT,OAAiBL,IAAKI,GAC7C,yBACCvC,UAAU,+CACV4C,MAAM,MACNC,OAAO,MACPC,QAAQ,YACRC,KAAK,eACLC,MAAM,8BAEN,0BACCC,SAAS,UACTC,EAAE,8OACFC,SAAS,aAEJ,IACNb,EAAEK,+BASP,4BACC,kBAAC,IAAD,CAAMS,GAAE,WAAMlB,EAAEzB,KACf,uBAAGT,UAAU,oBAAb,6BArDqB,kBAAC,EAAD,U,GAlDGqD,a,gBCCdC,E,4MAIpBzC,MAAQ,CACP0C,SAAS,EACTC,KAAM,KACNhD,YAAa,IAAIQ,KACjByC,OAAO,G,EAeRxC,QAAU,WACL,EAAKC,SAAS,EAAKA,QAAQC,cAE/B,EAAKM,SAAS,CAAE8B,SAAS,IAEzB,EAAKrC,QAAUE,YAAM,EAAG,KACtBC,KACAC,aAAU,WACT,OAAOoC,YAAKtD,EAAU,EAAKwB,MAAMvB,SAASgB,KACzCsC,aAAS,kBAAM,EAAKlC,SAAS,CAAE8B,SAAS,YAI1ChC,WACA,YAAe,IAAZC,EAAW,EAAXA,KACF,EAAKC,SAAS,CACb+B,KAAMhC,EAAK,GACXhB,YAAa,IAAIQ,UAGnB,kBAAM,EAAKS,SAAS,CAAEgC,OAAO,Q,kEA/B/B3B,KAAKb,Y,yCAGac,GACdD,KAAKF,MAAMvB,SAAW0B,EAAU1B,QAAQyB,KAAKb,Y,6CAI7Ca,KAAKZ,SAASY,KAAKZ,QAAQC,gB,+BA4B/B,OACC,6BACC,kBAAC,EAAD,CAAWX,YAAasB,KAAKjB,MAAML,cACnC,yBAAKR,UAAU,qBACd,yBAAKA,UAAU,0BACb8B,KAAKjB,MAAM4C,MACX,yBAAKzD,UAAU,aACd,wBAAIA,UAAU,cAAd,kBACA,kBAAC,IAAD,CAAMoD,GAAI,KACT,uBAAGpD,UAAU,aAAb,iBAIF,yBAAKA,UAAU,aACd,wBAAIA,UAAU,cACZ8B,KAAKjB,MAAM2C,MAAQ1B,KAAKjB,MAAM2C,KAAKpB,MAErC,uBAAGpC,UAAU,aACV8B,KAAKjB,MAAM2C,MACZ1B,KAAKjB,MAAM2C,KAAKnB,aAAa,GAAGuB,QAChC,+BAEF,kBAAC,IAAD,CAAMR,GAAI,KACT,uBAAGpD,UAAU,aAAb,kBAKH8B,KAAKjB,MAAM2C,KACX,yBAAKxD,UAAU,oCACd,yBACCH,MAAO,CACNgD,OAAQ,IACR9C,UAAW,UACX8D,eAAgB,iBAEjBlE,IAAG,yBAAoBmC,KAAKjB,MAAM2C,KAAK/C,GAApC,QACHT,UAAU,QACVJ,IAAKkC,KAAKjB,MAAM2C,KAAKpB,QAGpB,KACHN,KAAKjB,MAAM0C,QACX,yBACC1D,MAAO,CACNiE,IAAK,EACLC,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNC,WAAY,4BAEblE,UAAU,sEAEV,kBAAC,EAAD,OAEE,MAEL,6BACA,2CACA,kBAAC,EAAD,CACC6B,SAAUC,KAAKjB,MAAM2C,MAAQ1B,KAAKjB,MAAM2C,KAAK/C,GAC7CuB,OAAQ,kBACPmC,YAAW,kBACVC,OAAOC,SAAS,CAAEP,IAAK,EAAGG,KAAM,EAAGK,SAAU,sB,GA/GXjB,aCF5BkB,EAAM,WAClB,OACC,yBAAKvE,UAAU,qBACd,yBAAKA,UAAU,OACd,kBAACN,EAAD,MACA,8BACC,kBAAC,IAAD,KACC,kBAAC,EAAD,CAAO8E,KAAK,MACZ,kBAAC,EAAD,CAAaA,KAAK,iBCXxBC,IAASC,OACR,kBAAC,IAAMC,WAAP,KACC,kBAAC,EAAD,OAEDC,SAASC,eAAe,W","file":"static/js/main.47eeae75.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Header() {\n\treturn (\n\t\t<header>\n\t\t\t<img\n\t\t\t\tsrc=\"https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Underground.svg/1200px-Underground.svg.png\"\n\t\t\t\talt=\"logo\"\n\t\t\t\tstyle={{ maxWidth: \"100px\", objectFit: \"contain\" }}\n\t\t\t/>\n\t\t\t<h1 className=\"m-0\">Tube Tracker</h1>\n\t\t</header>\n\t);\n}\n","import axios from \"axios\";\n\nexport const fetchLines = () =>\n\taxios.get(\n\t\t\"https://api.tfl.gov.uk/Line/Mode/tube/Status?app_id=cdf2be4d&app_key=2c620fbd67b0fe7202e99b15a97419d6\"\n\t);\n\nexport const fetchLine = lineId =>\n\taxios.get(\n\t\t`https://api.tfl.gov.uk/Line/${lineId}/Status?app_id=cdf2be4d&app_key=2c620fbd67b0fe7202e99b15a97419d6`\n\t);\n","import React from \"react\";\n\nexport const Loader = () => {\n\treturn (\n\t\t<div className=\"d-flex align-items-center justify-content-center py-2\">\n\t\t\t<div className=\"spinner-border text-primary\">\n\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from \"react\";\nimport moment from \"moment\";\n\nexport const UpdatedOn = ({ lastUpdated }) => {\n\treturn (\n\t\t<h5 id=\"updated\">\n\t\t\tUpdated on {moment(lastUpdated).format(\"DD MMM YYYY â€” HH:mm:ss\")}\n\t\t</h5>\n\t);\n};\n","import React, { Component } from \"react\";\nimport { timer } from \"rxjs\";\nimport { switchMap } from \"rxjs/operators\";\nimport { Link } from \"@reach/router\";\n\nimport { fetchLines } from \"../utils/api\";\nimport { Loader } from \"./Loader\";\nimport { UpdatedOn } from \"./UpdatedOn\";\n\nexport default class Table extends Component {\n\tdataSub;\n\n\tstate = {\n\t\trawLines: [],\n\t\tlines: null,\n\t\tlastUpdated: new Date(),\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.filterId !== prevProps.filterId) {\n\t\t\tthis.setState({\n\t\t\t\tlines: this.state.rawLines.filter((item) => {\n\t\t\t\t\tif (!this.props.filterId) return true;\n\n\t\t\t\t\treturn item.id !== this.props.filterId;\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\tif (this.props.loaded) this.props.loaded();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.dataSub) this.dataSub.unsubscribe();\n\t}\n\n\tgetData = () => {\n\t\tif (this.dataSub) this.dataSub.unsubscribe();\n\n\t\tthis.dataSub = timer(0, 60000)\n\t\t\t.pipe(switchMap(() => fetchLines()))\n\t\t\t.subscribe(({ data }) =>\n\t\t\t\tthis.setState({\n\t\t\t\t\trawLines: data,\n\t\t\t\t\tlines: data.filter((item) => {\n\t\t\t\t\t\tif (!this.props.filterId) return true;\n\n\t\t\t\t\t\treturn item.id !== this.props.filterId;\n\t\t\t\t\t}),\n\t\t\t\t\tlastUpdated: new Date(),\n\t\t\t\t})\n\t\t\t);\n\t};\n\n\trender() {\n\t\tif (!this.state.lines) return <Loader />;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<UpdatedOn lastUpdated={this.state.lastUpdated} />\n\t\t\t\t<table\n\t\t\t\t\tclassName=\"table text-dark bg-white table-bordered mb-0\"\n\t\t\t\t\tid=\"table\"\n\t\t\t\t>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{this.state.lines.map((i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={i.id}>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"font-weight-bold mb-0 line-name\"\n\t\t\t\t\t\t\t\t\t\t\tid={`${i.id}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{i.name}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{i.lineStatuses.map((s, index) => {\n\t\t\t\t\t\t\t\t\t\t\tconst isLast = index === i.lineStatuses.length - 1;\n\t\t\t\t\t\t\t\t\t\t\treturn ![\"No Issues\", \"Good Service\"].includes(\n\t\t\t\t\t\t\t\t\t\t\t\ts.statusSeverityDescription\n\t\t\t\t\t\t\t\t\t\t\t) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={!isLast ? \"mb-1\" : \"mb-0\"} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-exclamation-triangle-fill text-warning\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M8.982 1.566a1.13 1.13 0 00-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 00-.9.995l.35 3.507a.552.552 0 001.1 0l.35-3.507A.905.905 0 008 5zm.002 6a1 1 0 100 2 1 1 0 000-2z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{s.statusSeverityDescription}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className={!isLast ? \"mb-1\" : \"mb-0\"} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{s.statusSeverityDescription}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<Link to={`/${i.id}`}>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"btn btn-link p-0\">More Information</p>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport { timer, from } from \"rxjs\";\nimport { switchMap, finalize } from \"rxjs/operators\";\nimport { Link } from \"@reach/router\";\n\nimport { fetchLine } from \"../utils/api\";\nimport { Loader } from \"./Loader\";\nimport { UpdatedOn } from \"./UpdatedOn\";\nimport Table from \"./Table\";\n\nexport default class LineDetails extends Component {\n\tdataSub;\n\thistoryUnsubscribe;\n\n\tstate = {\n\t\tloading: true,\n\t\tline: null,\n\t\tlastUpdated: new Date(),\n\t\terror: false,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.getData();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.props.lineId !== prevProps.lineId) this.getData();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.dataSub) this.dataSub.unsubscribe();\n\t}\n\n\tgetData = () => {\n\t\tif (this.dataSub) this.dataSub.unsubscribe();\n\n\t\tthis.setState({ loading: true });\n\n\t\tthis.dataSub = timer(0, 60000)\n\t\t\t.pipe(\n\t\t\t\tswitchMap(() => {\n\t\t\t\t\treturn from(fetchLine(this.props.lineId)).pipe(\n\t\t\t\t\t\tfinalize(() => this.setState({ loading: false }))\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t)\n\t\t\t.subscribe(\n\t\t\t\t({ data }) => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tline: data[0],\n\t\t\t\t\t\tlastUpdated: new Date(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t() => this.setState({ error: true })\n\t\t\t);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<UpdatedOn lastUpdated={this.state.lastUpdated} />\n\t\t\t\t<div className=\"position-relative\">\n\t\t\t\t\t<div className=\"card text-dark rounded\">\n\t\t\t\t\t\t{this.state.error ? (\n\t\t\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t\t\t<h3 className=\"card-title\">Line not found</h3>\n\t\t\t\t\t\t\t\t<Link to={\"/\"}>\n\t\t\t\t\t\t\t\t\t<p className=\"card-link\">&#8249; Back</p>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"card-body\">\n\t\t\t\t\t\t\t\t<h3 className=\"card-title\">\n\t\t\t\t\t\t\t\t\t{this.state.line && this.state.line.name}\n\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t<p className=\"card-text\">\n\t\t\t\t\t\t\t\t\t{(this.state.line &&\n\t\t\t\t\t\t\t\t\t\tthis.state.line.lineStatuses[0].reason) ||\n\t\t\t\t\t\t\t\t\t\t\"Services running as normal.\"}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<Link to={\"/\"}>\n\t\t\t\t\t\t\t\t\t<p className=\"card-link\">&#8249; Back</p>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.state.line ? (\n\t\t\t\t\t\t<div className=\"bg-white p-4 rounded mt-2 border\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\theight: 220,\n\t\t\t\t\t\t\t\t\tobjectFit: \"contain\",\n\t\t\t\t\t\t\t\t\tobjectPosition: \"center center\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsrc={`/assets/images/${this.state.line.id}.png`}\n\t\t\t\t\t\t\t\tclassName=\"w-100\"\n\t\t\t\t\t\t\t\talt={this.state.line.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{this.state.loading ? (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tbottom: 0,\n\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\tbackground: \"rgba(255, 255, 255, 0.5)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"position-absolute d-flex align-items-center justify-content-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<hr />\n\t\t\t\t<h3>Other Lines</h3>\n\t\t\t\t<Table\n\t\t\t\t\tfilterId={this.state.line && this.state.line.id}\n\t\t\t\t\tloaded={() =>\n\t\t\t\t\t\tsetTimeout(() =>\n\t\t\t\t\t\t\twindow.scrollTo({ top: 0, left: 0, behavior: \"smooth\" })\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport \"./App.css\";\n\nimport Header from \"./components/Header\";\nimport Table from \"./components/Table\";\nimport LineDetails from \"./components/LineDetails\";\n\nexport const App = () => {\n\treturn (\n\t\t<div className=\"bg-container pb-5\">\n\t\t\t<div className=\"app\">\n\t\t\t\t<Header />\n\t\t\t\t<main>\n\t\t\t\t\t<Router>\n\t\t\t\t\t\t<Table path=\"/\" />\n\t\t\t\t\t\t<LineDetails path=\":lineId\" />\n\t\t\t\t\t</Router>\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}